apply plugin: 'groovy'
apply plugin: 'bintray'

targetCompatibility = JavaVersion.VERSION_1_7
sourceCompatibility = JavaVersion.VERSION_1_7

dependencies {
    compile gradleApi()
    compile localGroovy()
    compile "com.android.tools.build:gradle:$androidToolsVersion"
    compile project(':processor')
}

def generatedResourcesDir = new File("$buildDir/generated-resources/main")

sourceSets {
    main {
        output.dir(generatedResourcesDir, builtBy: 'generateVersionProperties')
    }
}

task generateVersionProperties {
    doLast {
        generatedResourcesDir.mkdirs()
        def file = new File(generatedResourcesDir, "version.properties")
        file.text = "lightsaber.version=$version"
    }
}
